
- name: configure slave
  template: src=.{{ item }}.j2  dest={{ item }}
            mode=0444
  with_items:
    - /etc/mesos-slave/work_dir
    - /etc/mesos-slave/ip
    - /etc/mesos-slave/isolation
    - /etc/mesos-slave/containerizers
    - /etc/mesos-slave/executor_registration_timeout
    - /etc/mesos-slave/switch_user
  notify: bounce mesos

- name: mesos slave systemd unit
  copy: src=etc/systemd/system/mesos-slave.service
        dest=/etc/systemd/system/mesos-slave.service
  notify:
    - refresh systemd
    - bounce mesos

- name: mesos slave service
  service: name=mesos-slave state=running enabled=yes
